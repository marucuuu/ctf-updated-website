{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <title>Profile Settings</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Poppins -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Font Awesome 6.0.0-beta3 CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'new_template/css/style.css' %}">

    <style>
      .floating-alert {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 1050; /* Ensure it appears above other elements */
          width: 300px; /* Adjust width as needed */
      }
    </style>

  </head>
  <body>
    <div class="wrapper d-flex align-items-stretch">

      <!-- NAVBAR -->
      {% include 'navbar/navbar_students.html' %}

      <!-- Page Content -->
      <div id="content" class="p-4 p-md-5">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">
            <button type="button" id="sidebarCollapse" class="btn btn-primary">
              <i class="fa fa-bars"></i>
            </button>
            <button class="btn btn-dark d-inline-block d-lg-none ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <i class="fa fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <span class="navbar-text me-3">Logged in as {{ request.user.username }}</span>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- Profile Settings and Change Password Forms -->
<div class="container mt-4">
  <div class="row">
      <!-- Profile Settings Form -->
      <div class="col-md-6 mb-4">
          <h2>Profile Settings</h2>
          <p class="text-muted">
              Update your profile details below. Fields marked with an asterisk (*) are required. Your changes will be saved once you click the "Update Profile" button.
          </p>
          <form method="POST" action="{% url 'update_profile' %}">
            {% csrf_token %}
            <div class="mb-3">
                <label for="username" class="form-label">Username*</label>
                <input type="text" class="form-control" id="username" name="username" value="{{ profile_form.username }}" required>
                <small class="form-text text-muted">Your unique username used to log in.</small>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" value="{{ profile_form.email }}" readonly>
                <small class="form-text text-muted">Your email address is displayed here but cannot be edited.</small>
            </div>
            <div class="mb-3">
                <label for="section" class="form-label">Section</label>
                <input type="text" class="form-control" id="section" name="section" value="{{ profile_form.section }}" readonly>
                <small class="form-text text-muted">Your section or group identifier (cannot be edited).</small>
            </div>
            <div class="mb-3">
                <label for="first_name" class="form-label">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" value="{{ profile_form.first_name }}">
                <small class="form-text text-muted">Optional. Your first name for personalization.</small>
            </div>
            <div class="mb-3">
                <label for="last_name" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" value="{{ profile_form.last_name }}">
                <small class="form-text text-muted">Optional. Your last name for personalization.</small>
            </div>
            <div class="mb-3">
                <label for="alias" class="form-label">Alias</label>
                <input type="text" class="form-control" id="alias" name="alias" value="{{ profile_form.alias }}">
                <small class="form-text text-muted">Optional. A nickname or alias to display instead of your real name.</small>
            </div>
            <button type="submit" class="btn btn-primary" name="update_profile">Update Profile</button>
        </form>
      </div>

      <!-- Change Password Form -->
      <div class="col-md-6 mb-4">
          <h2>Change Password</h2>
          <p class="text-muted">
              To change your password, enter your current password and your new password twice for confirmation. Make sure your new password is strong and secure.
          </p>
          <form method="POST" action="">
              {% csrf_token %}
              <div class="mb-3">
                  <label for="old_password" class="form-label">Old Password*</label>
                  <input type="password" class="form-control" id="old_password" name="old_password" required>
                  <small class="form-text text-muted">Enter your current password to verify your identity.</small>
              </div>
              <div class="mb-3">
                  <label for="new_password1" class="form-label">New Password*</label>
                  <input type="password" class="form-control" id="new_password1" name="new_password1" required>
                  <small class="form-text text-muted">Enter a strong password with at least 8 characters.</small>
              </div>
              <div class="mb-3">
                  <label for="new_password2" class="form-label">Confirm New Password*</label>
                  <input type="password" class="form-control" id="new_password2" name="new_password2" required>
                  <small class="form-text text-muted">Re-enter the new password to confirm.</small>
              </div>
              <button type="submit" name="change_password" class="btn btn-primary">Change Password</button>
          </form>
      </div>
  </div>
</div>



      {% include 'notification/student_notification.html' %}

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <script src="{% static 'new_template/js/jquery.min.js' %}"></script>
      <script src="{% static 'new_template/js/popper.js' %}"></script>
      <script src="{% static 'new_template/js/bootstrap.min.js' %}"></script>
      <script src="{% static 'new_template/js/main.js' %}"></script>
      
  </body>
</html>
